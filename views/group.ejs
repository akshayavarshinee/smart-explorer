<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Explorer - Group Planning</title>

    <!-- <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet"> -->

    <link rel="stylesheet" href="/group-style.css">
    <link rel="stylesheet" href="/header-footer.css">
</head>
<body class="offline-view">
    <%- include("partials/header.ejs") %>

    <main class="container">

        <!-- <section class="card">
        <h3>Create a group</h3>
        <form action="/group" method="post" class="invite">
            <label for="group_name">Group Name</label>
            <input type="text" placeholder="Enter your group name" required name="group_name">
            <button type="submit" class="btn btn-primary create-group">Create</button>
            <div class="invite-message">
            <% if (typeof status !== "undefined" && status) { %>
                <p class="sub-text status-msg"><%= status %></p>
            <% } %>
            </div>
        </form>
        </section> -->

        <section class="card span2">
            <a href="/groups_list" class="btn btn-primary create-group">Create</a>
            <h3>Invite Friends</h3>
            <form action="/invite" method = "post" class="invite">
                <label for="group_name">Group Name</label>
                <input type="text" placeholder="Enter your group name" required name="group_name">

                <label for="email">Email</label>
                <input type="email" placeholder="friend@email.com" name="email" required>
                <button type="submit" class="btn btn-primary send">Send</button>
            
                <div class="invite-message">
                    <% if (typeof message !== "undefined" && message) { %>
                    <p class="sub-text status-msg"><%= message %></p>
                    <% } %>
                </div>
            </form>

            
            <!-- <div class="group-card"> -->
                <h4 style="margin-bottom: 2px;">Members</h4>
                <!-- <form action = "/search" method="POST" class="invite shorter">
                    <label for="group_name">Group Name</label>
                    <div>
                        <input type="text" placeholder="Enter your group name" required name="group_name">
                        <button type="submit" class="btn btn-primary send">Search</button>
                    </div>
                
                </form> -->
                <% if(locals.members){ %>
                    <ul class="member-list">
                    <% members.forEach(member => { %>
                        <li class="member-item">
                            <div class="member-avatar"><%= member.username.charAt(0).toUpperCase() %></div>
                                <div class="member-info">
                                    <div class="member-name">
                                        <%= member.username %>
                                        <% if (member.isAdmin) { %>
                                        <span class="role-badge">Host</span>
                                        <% } %>
                                    </div>
                                    <div class="member-email"><%= member.email %></div>
                                </div>
                        </li>
                        <% }) %>
                    </ul>
                <% } %>
                
            <!-- </div> -->

        </section>

        <!-- Itinerary Section -->
        <section class="card">
            <nav class="tabs">
                <button class="tab tab--active">Day 1</button>
                <button class="tab">Day 2</button>
                <button class="tab">Day 3</button>
            </nav>

        <h4 style="margin-bottom: 2px;">Day 1 Itinerary</h4>
        <p class="sub-text">Drag to reorder, click to vote</p>

        <ul class="itinerary">
                <li class="itinerary__item">
                    <div class="itinerary__details">
                        <strong>Local Art Museum</strong>
                        <span class="tag">Museums</span>
                        <span class="added-by">Added by You</span>
                    </div>
                    <div class="actions">
                        <button class="vote-btn">üëç</button>
                        <button class="delete-btn">üóë</button>
                    </div>
                </li>

                <li class="itinerary__item">
                    <div class="itinerary__details">
                        <strong>Central Park Gardens</strong>
                        <span class="tag">Nature & Parks</span>
                        <span class="added-by">Added by Mike</span>
                    </div>
                    <div class="actions">
                        <button class="vote-btn">üëç</button>
                        <button class="delete-btn">üóë</button>
                    </div>
                </li>
        </ul>

        
        <!-- Bottom Buttons -->
            <div class="bottom-btns">
                <button class="btn btn-link">+ Add More Places</button>
                <% if (locals.isUserAdmin) { %>
                    <button class="btn btn-danger">Delete Group</button>
                    <button class="btn btn-primary">Finalize & Save</button>
                <% } %>

                
            </div>
        </section>

    
    </main>

    <script>
        window.addEventListener('DOMContentLoaded', function() {
            var msg = document.querySelectorAll('.status-msg');
            for(let i = 0; i < msg.length; ++i){
            if (msg[i]) {
                setTimeout(function() {
                msg[i].style.display = 'none';
                }, 3000);
            }
            }
        });

        document.querySelector("button[type='submit']").addEventListener("click", () => {
            setTimeout(() => {
            document.querySelector(".notify").style.visibility = "visible";
            }, 3000);
            document.querySelector(".notify").style.visibility = "hidden";
        })
    </script>

    <%- include("partials/footer.ejs") %>
</body>
</html>
